# Define Aloha presets to reuse throughout the document
blah: &alohaPlain
  placeholder: 'Enter title here'
  format:
    b: false
    i: false
    u: false
    sub: false
    sup: false
    p: false
    h1: false
    h2: false
    h3: false
    pre: false
    removeFormat: false
  table: {  }
  list: {  }
  link:
    a: false
  alignment: {  }

blah: &alohaRich
  placeholder: 'Enter title here'
  format:
    b: true
    i: true
    u: false
    sub: true
    sup: true
    p: false
    h1: false
    h2: false
    h3: false
    pre: false
    removeFormat: false
  table: {  }
  list: {  }
  link:
    a: true
  alignment: {  }

'Sfi.Kateheo:PageMain':
  superTypes:
    - 'TYPO3.Neos.NodeTypes:Page'
  ui:
    label: 'Главная страница'

'Sfi.Kateheo:LoginPage':
  superTypes:
    - 'TYPO3.Neos.NodeTypes:Page'
  ui:
    label: 'Страница входа'

'Sfi.Kateheo:Category':
  superTypes:
    - 'TYPO3.Neos:Document'
    - 'Sfi.Listable:ListableCategoryMixin'
  ui:
    label: 'Категория'
  childNodes:
    main:
      type: 'TYPO3.Neos:ContentCollection'
  properties:
    originalIdentifier:
      type: string
  constraints:
    nodeTypes:
      '*': false
      'Sfi.Listable:ListableMixin': true
      'Sfi.Listable:ListableCategoryMixin': true


'Sfi.Kateheo:AuthorsDirectoryPage':
  superTypes:
    - 'TYPO3.Neos:Document'
    - 'Sfi.Listable:ListableCategoryMixin'
  ui:
    label: 'Страница авторов'
  childNodes:
    main:
      type: 'TYPO3.Neos:ContentCollection'
  properties:
    originalIdentifier:
      type: string
  constraints:
    nodeTypes:
      '*': false
      'Sfi.Listable:ListableMixin': true
      'Sfi.Listable:ListableCategoryMixin': true

'Sfi.Kateheo:Author':
  superTypes:
    - 'TYPO3.Neos:Document'
  ui:
    label: 'Автор'
  childNodes:
    main:
      type: 'TYPO3.Neos:ContentCollection'
  properties:
    title:
      ui:
        inlineEditable: true
        aloha:
          <<: *alohaPlain
          placeholder: 'Имя автора'
    originalIdentifier:
      type: string

'Sfi.Kateheo:TagsPage':
  superTypes:
    - 'TYPO3.Neos:Document'
    - 'Sfi.Listable:ListableCategoryMixin'
  ui:
    label: 'Страница тегов'
  childNodes:
    main:
      type: 'TYPO3.Neos:ContentCollection'
  properties:
    originalIdentifier:
      type: string
  constraints:
    nodeTypes:
      '*': false
      'Sfi.Listable:ListableMixin': true
      'Sfi.Listable:ListableCategoryMixin': true

'Sfi.Kateheo:Tags':
  superTypes:
    - 'TYPO3.Neos:Document'
  ui:
    label: 'Тэг'
  childNodes:
    main:
      type: 'TYPO3.Neos:ContentCollection'
  properties:
    title:
      ui:
        inlineEditable: true
        aloha:
          <<: *alohaPlain
          placeholder: 'Тэг'
    originalIdentifier:
      type: string

'Sfi.Kateheo:News':
  superTypes:
    - 'TYPO3.Neos:Document'
    - 'Sfi.Listable:ListableMixin'
  ui:
    label: 'Новость'
    inspector:
        groups:
          news:
            label: 'Атрибуты новости'
  childNodes:
    coverCollection:
      type: 'TYPO3.Neos:ContentCollection'
    main:
      type: 'TYPO3.Neos:ContentCollection'
  properties:
    title:
      ui:
        inlineEditable: true
        aloha:
          <<: *alohaPlain
          placeholder: 'Заголовок новости'
    teaser:
      type: string
      ui:
        inlineEditable: true
        aloha:
          <<: *alohaRich
          placeholder: 'Тизер'
    date:
      type: DateTime
      defaultValue: 'now'
      ui:
        label: 'Дата'
        reloadIfChanged: true
        inspector:
          group: news
          editorOptions:
            format: 'd-m-Y H:i'
      validation:
        'TYPO3.Neos/Validation/DateTimeValidator': []
    authors:
      type: references
      ui:
        label: 'Авторы'
        reloadIfChanged: true
        inspector:
          group: news
          editorOptions:
            nodeTypes:
              - 'Sfi.Kateheo:Author'
    tags:
      type: references
      ui:
        label: 'Тэги'
        reloadIfChanged: true
        inspector:
          group: news
          editorOptions:
            nodeTypes:
              - 'Sfi.Kateheo:Tags'
    originalIdentifier:
      type: string

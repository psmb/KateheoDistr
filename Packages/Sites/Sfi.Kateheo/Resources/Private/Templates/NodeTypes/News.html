{namespace neos=TYPO3\Neos\ViewHelpers}
{namespace m=TYPO3\Media\ViewHelpers}

<f:layout name="withCategoryMenu"/>

<f:section name="Content">
	<div class="news news-single">
		<div class="article" itemscope="itemscope" itemtype="http://schema.org/Article">

			<div class="header">
				<h3 itemprop="headline">{neos:contentElement.editable(property: 'title', tag: 'span')}</h3>
			</div>

			<div class="footer">
				<p>
					<!-- date -->
					<span class="news-list-date">
						<time datetime="{f:format.date(date:date, format:'Y-m-d')}">
							<f:format.date >{date}</f:format.date>
							<meta itemprop="datePublished" content="{f:format.date(date:date, format:'Y-m-d')}" />
						</time>
					</span>
					<!-- author -->
					<f:for each="{authors}" as="item">
						<f:if condition="{item.properties.title}">
							<i class="fa fa-user"></i>
							<neos:link.node node="{item}">
								<span class="news-list-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">
									<span itemprop="name">{item.properties.title}</span>
								</span>
							</neos:link.node>
						</f:if>
					</f:for>
					<!-- tags -->
					<f:for each="{tags}" as="item">
						<f:if condition="{item.properties.title}">
							<i class="fa fa-tag"></i>
							<neos:link.node node="{item}">
								<span class="news-list-tag" itemprop="keywords" itemscope="itemscope" itemtype="http://schema.org/Person">
									<span>{item.properties.title}</span>
								</span>
							</neos:link.node>
						</f:if>
					</f:for>
				</p>
			</div>
			<f:if condition="{node.context.workspace.name} != 'live'">
				<f:then>
					<div class="teaser-text" itemprop="description">
						{neos:contentElement.editable(property: 'teaser', tag: 'span')}
					</div>
				</f:then>
				<f:else>
					<f:if condition="{teaser}">
						<!-- teaser -->
						<div class="teaser-text" itemprop="description">
							{neos:contentElement.editable(property: 'teaser', tag: 'span')}
						</div>
					</f:if>
				</f:else>
			</f:if>
			{coverCollection -> f:format.raw()}

			<div class="news-text-wrap" itemprop="articleBody">
				{main -> f:format.raw()}
			</div>

			<f:render partial="Disqus" arguments="{_all}" />

		</div>
	</div>
</f:section>
